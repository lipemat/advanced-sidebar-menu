<!--
To show this preview on the plugins page in wordpress.org
update the `.wordpress-org/blueprints/blueprint.json` file.

@link https://make.wordpress.org/meta/2023/11/22/plugin-directory-preview-button-revisited/
@link https://make.wordpress.org/meta/2023/12/08/plugin-previews-are-now-available-for-opt-in/

Documentation
@link https://wordpress.github.io/wordpress-playground/blueprints-api/data-format

-->


<iframe id="wp-playground" style="width: 1200px; height: 800px"></iframe>
<script type="module">
	import {startPlaygroundWeb} from 'https://playground.wordpress.net/client/index.js';

	const client = await startPlaygroundWeb( {
		iframe: document.getElementById( 'wp-playground' ),
		remoteUrl: `https://playground.wordpress.net/remote.html`,
		blueprint: {
			'$schema': 'https://playground.wordpress.net/blueprint-schema.json',
			'landingPage': '/wp-admin/post.php?post=5&action=edit',
			'preferredVersions': {
				'php': '8.0',
				'wp': '6.4.3'
			},
			'phpExtensionBundles': [
				'kitchen-sink'
			],
			'features': {
				'networking': true
			},
			'steps': [
				{
					'step': 'login',
					'username': 'admin',
					'password': 'password'
				},
				{
					'step': 'installPlugin',
					'pluginZipFile': {
						'resource': 'wordpress.org/plugins',
						'slug': 'advanced-sidebar-menu'
					},
					'options': {
						'activate': true
					}
				},
				{
					'step': 'setSiteOptions',
					'options': {
						'blogname': 'Advanced Sidebar Menu - Demo',
					}
				},
				{
					'step': 'runPHP',
					'code': '<?php\ninclude \'wordpress/wp-load.php\';\nwp_insert_post(array(\n\'import_id\' => 5,\n\'post_title\' => \'Top Level Parent\',\n\'post_content\' => \'<!-- wp:advanced-sidebar-menu/pages {"include_parent":true,"include_childless_parent":true,"display_all":false} /--><!-- wp:paragraph --><p>View the various pages to see how the menu will display on each of them.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>The blocks may also be used in the <a href="/wp-admin/site-editor.php" data-type="link" data-id="/wp-admin/site-editor.php">site editor</a>.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>For more information on how the menu levels work, see the <a href="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" data-type="link" data-id="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" target="_blank" rel="noreferrer noopener">interactive demo</a>.</p><!-- /wp:paragraph -->\',\n\'post_status\' => \'publish\',\n\'post_author\' => 1,\n\'post_type\'=>\'page\'));'
				},
				{
					'step': 'runPHP',
					'code': '<?php\ninclude \'wordpress/wp-load.php\';\nwp_insert_post(array(\n\'import_id\' => 6,\n\'post_parent\'=>\'5\',\n\'post_title\' => \'Child 1\',\n\'post_content\' => \'<!-- wp:advanced-sidebar-menu/pages {"include_parent":true,"include_childless_parent":true,"display_all":false} /--><!-- wp:paragraph --><p>View the various pages to see how the menu will display on each of them.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>The blocks may also be used in the <a href="/wp-admin/site-editor.php" data-type="link" data-id="/wp-admin/site-editor.php">site editor</a>.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>For more information on how the menu levels work, see the <a href="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" data-type="link" data-id="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" target="_blank" rel="noreferrer noopener">interactive demo</a>.</p><!-- /wp:paragraph -->\',\n\'post_status\' => \'publish\',\n\'post_author\' => 1,\n\'post_type\'=>\'page\'));'
				},
				{
					'step': 'runPHP',
					'code': '<?php\ninclude \'wordpress/wp-load.php\';\nwp_insert_post(array(\n\'import_id\' => 7,\n\'post_parent\'=>\'5\',\n\'post_title\' => \'Child 2\',\n\'post_content\' => \'<!-- wp:advanced-sidebar-menu/pages {"include_parent":true,"include_childless_parent":true,"display_all":false} /--><!-- wp:paragraph --><p>View the various pages to see how the menu will display on each of them.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>The blocks may also be used in the <a href="/wp-admin/site-editor.php" data-type="link" data-id="/wp-admin/site-editor.php">site editor</a>.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>For more information on how the menu levels work, see the <a href="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" data-type="link" data-id="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" target="_blank" rel="noreferrer noopener">interactive demo</a>.</p><!-- /wp:paragraph -->\',\n\'post_status\' => \'publish\',\n\'post_author\' => 1,\n\'post_type\'=>\'page\'));'
				},
				{
					'step': 'runPHP',
					'code': '<?php\ninclude \'wordpress/wp-load.php\';\nwp_insert_post(array(\n\'import_id\' => 8,\n\'post_parent\'=>\'6\',\n\'post_title\' => \'Grandchild 2\',\n\'post_content\' => \'<!-- wp:advanced-sidebar-menu/pages {"include_parent":true,"include_childless_parent":true,"display_all":false} /--><!-- wp:paragraph --><p>View the various pages to see how the menu will display on each of them.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>The blocks may also be used in the <a href="/wp-admin/site-editor.php" data-type="link" data-id="/wp-admin/site-editor.php">site editor</a>.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>For more information on how the menu levels work, see the <a href="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" data-type="link" data-id="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" target="_blank" rel="noreferrer noopener">interactive demo</a>.</p><!-- /wp:paragraph -->\',\n\'post_status\' => \'publish\',\n\'post_author\' => 1,\n\'post_type\'=>\'page\'));'
				},
				{
					'step': 'runPHP',
					'code': '<?php\ninclude \'wordpress/wp-load.php\';\nwp_insert_post(array(\n\'import_id\' => 9,\n\'post_parent\'=>\'6\',\n\'post_title\' => \'Grandchild 2\',\n\'post_content\' => \'<!-- wp:advanced-sidebar-menu/pages {"include_parent":true,"include_childless_parent":true,"display_all":false} /--><!-- wp:paragraph --><p>View the various pages to see how the menu will display on each of them.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>The blocks may also be used in the <a href="/wp-admin/site-editor.php" data-type="link" data-id="/wp-admin/site-editor.php">site editor</a>.</p><!-- /wp:paragraph --><!-- wp:paragraph --><p>For more information on how the menu levels work, see the <a href="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" data-type="link" data-id="https://onpointplugins.com/advanced-sidebar-menu/#interactive-demo" target="_blank" rel="noreferrer noopener">interactive demo</a>.</p><!-- /wp:paragraph -->\',\n\'post_status\' => \'publish\',\n\'post_author\' => 1,\n\'post_type\'=>\'page\'));'
				}
			]
		}
	} );

	const response = await client.run( {
		// wp-load.php is only required if you want to interact with WordPress.
		code: '<?php require_once "/wordpress/wp-load.php"; $posts = get_posts(); echo "Post Title: " . $posts[0]->post_title;',
	} );
	console.log( response.text );
</script>
